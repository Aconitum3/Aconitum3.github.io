---
---
<style>
  .toggle input[type='checkbox'] {
    display: none;
  }
  .toggle label {
    background-color: #F8F8F2;
    border: 2px solid #282A36;
    border-radius: 30px;
    cursor: pointer;
    display: inline-block;
    position: relative;
    transition: all ease-in-out 0.3s;
    width: 60px;
    height: 30px;
  }
  .toggle label::after {
    background-color: #282A36;
    border-radius: 50%;
    content: ' ';
    cursor: pointer;
    display: inline-block;
    position: absolute;
    left: 5px;
    top: 3px;
    transition: all ease-in-out 0.3s;
    width: 23px;
    height: 23px;
  }
  .toggle input[type='checkbox']:checked ~ label {
    background-color: #F7D94C;
  }

  .toggle input[type='checkbox']:checked ~ label::after {
    transform: translateX(27px);
  }
</style>

<div class="toggle">
  <p>Dark Mode</p>
  <input type="checkbox" id="toggle" />
  <label for="toggle"></label>
</div>

<script is:inline>
  const toggle = document.getElementById('toggle');
  const body = document.body;

  var mode = localStorage.getItem('mode');
  
  if ( mode === 'dark' ) {
    toggle.checked = true;
    body.classList.add('dark-theme');
  };

  toggle.addEventListener('input', e => {
    const isChecked = e.target.checked;

    if (isChecked) {
        body.classList.add('dark-theme');
        localStorage.setItem('mode','dark');
    } else {
        body.classList.remove('dark-theme');
        localStorage.setItem('mode','normal');
    }
  });
</script>
